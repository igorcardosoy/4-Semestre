DROP DATABASE IF EXISTS TechnicalAssistance;

CREATE DATABASE TechnicalAssistance;

USE TechnicalAssistance;


CREATE TABLE ADDRESS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    STREET VARCHAR(60) NOT NULL,
    NUMBER INT NOT NULL,
    COMPLEMENT VARCHAR(50),
    NEIGHBORHOOD VARCHAR(30) NOT NULL,
    CITY VARCHAR(25) NOT NULL,
    STATE VARCHAR(25) NOT NULL,
    ZIPCODE VARCHAR(9) NOT NULL
);

CREATE TABLE CUSTOMER (
  ID INT PRIMARY KEY AUTO_INCREMENT,
  CODE INT NOT NULL UNIQUE,
  NAME VARCHAR(100) NOT NULL,
  EMAIL VARCHAR(100) NOT NULL,
  PHONE VARCHAR(20) NOT NULL,
  CPF VARCHAR(14) NOT NULL,
  ADDRESS_ID INT NOT NULL,

  FOREIGN KEY (ADDRESS_ID) REFERENCES ADDRESS(ID)
);

CREATE TABLE PAYMENT_METHOD (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    CODE INT NOT NULL UNIQUE,
    NAME VARCHAR(50) NOT NULL
);

CREATE TABLE ORDER_STATUS (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE CUSTOMER_ORDER (
    ID INT PRIMARY KEY AUTO_INCREMENT,
    CODE INT NOT NULL UNIQUE,
    DESCRIPTION VARCHAR(100) NOT NULL,
    ISSUE_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    PRICE DECIMAL(10,2) NOT NULL,
    CUSTOMER_CODE INT NOT NULL,
    PAYMENT_METHOD_CODE INT NOT NULL,
    STATUS_NAME VARCHAR(50) NOT NULL,
    OBSERVATION VARCHAR(200),

    FOREIGN KEY (CUSTOMER_CODE) REFERENCES CUSTOMER(CODE),
    FOREIGN KEY (PAYMENT_METHOD_CODE) REFERENCES PAYMENT_METHOD(CODE),
    FOREIGN KEY (STATUS_NAME) REFERENCES ORDER_STATUS(NAME)
);


SELECT * FROM CUSTOMER;
SELECT * FROM ADDRESS;
SELECT * FROM ORDER_STATUS;
SELECT * FROM CUSTOMER_ORDER;